{{ '3d-carousel.css' | asset_url | stylesheet_tag }}
{{ '3d-carousel.js' | asset_url | script_tag }}

{%- assign placeholder_ext = '.webp' -%}

{% schema %}
{
  "name": "3D Image Carousel",
  "settings": [
    { "type": "text", "id": "heading", "label": "Section Heading", "default": "Our Concern" },

    { "type": "image_picker", "id": "image_1", "label": "Image 1" },
    { "type": "text", "id": "title_1", "label": "Title 1", "default": "Our Concern_1" },
    { "type": "text", "id": "button_text_1", "label": "Button Text 1", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_1", "label": "Button Link 1"},

    { "type": "image_picker", "id": "image_2", "label": "Image 2" },
    { "type": "text", "id": "title_2", "label": "Title 2", "default": "Our Concern_2" },
    { "type": "text", "id": "button_text_2", "label": "Button Text 2", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_2", "label": "Button Link 2" },

    { "type": "image_picker", "id": "image_3", "label": "Image 3" },
    { "type": "text", "id": "title_3", "label": "Title 3", "default": "Our Concern_3" },
    { "type": "text", "id": "button_text_3", "label": "Button Text 3", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_3", "label": "Button Link 3" },

    { "type": "image_picker", "id": "image_4", "label": "Image 4 (Center)" },
    { "type": "text", "id": "title_4", "label": "Title 4", "default": "Our Concern_4" },
    { "type": "text", "id": "button_text_4", "label": "Button Text 4", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_4", "label": "Button Link 4" },

    { "type": "image_picker", "id": "image_5", "label": "Image 5" },
    { "type": "text", "id": "title_5", "label": "Title 5", "default": "Our Concern_5" },
    { "type": "text", "id": "button_text_5", "label": "Button Text 5", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_5", "label": "Button Link 5" },

    { "type": "image_picker", "id": "image_6", "label": "Image 6" },
    { "type": "text", "id": "title_6", "label": "Title 6", "default": "Our Concern_6" },
    { "type": "text", "id": "button_text_6", "label": "Button Text 6", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_6", "label": "Button Link 6" },

    { "type": "image_picker", "id": "image_7", "label": "Image 7" },
    { "type": "text", "id": "title_7", "label": "Title 7", "default": "Our Concern_7" },
    { "type": "text", "id": "button_text_7", "label": "Button Text 7", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_7", "label": "Button Link 7" },

    { "type": "image_picker", "id": "image_8", "label": "Image 8" },
    { "type": "text", "id": "title_8", "label": "Title 8", "default": "Our Concern_8" },
    { "type": "text", "id": "button_text_8", "label": "Button Text 8", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_8", "label": "Button Link 8" },

    { "type": "image_picker", "id": "image_9", "label": "Image 9" },
    { "type": "text", "id": "title_9", "label": "Title 9", "default": "Our Concern_9" },
    { "type": "text", "id": "button_text_9", "label": "Button Text 9", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_9", "label": "Button Link 9" },

    { "type": "image_picker", "id": "image_10", "label": "Image 10" },
    { "type": "text", "id": "title_10", "label": "Title 10", "default": "Our Concern_10" },
    { "type": "text", "id": "button_text_10", "label": "Button Text 10", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_10", "label": "Button Link 10" },

    { "type": "image_picker", "id": "image_11", "label": "Image 11" },
    { "type": "text", "id": "title_11", "label": "Title 11", "default": "Our Concern_11" },
    { "type": "text", "id": "button_text_11", "label": "Button Text 11", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_11", "label": "Button Link 11" },

    { "type": "image_picker", "id": "image_12", "label": "Image 12" },
    { "type": "text", "id": "title_12", "label": "Title 12", "default": "Our Concern_12" },
    { "type": "text", "id": "button_text_12", "label": "Button Text 12", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_12", "label": "Button Link 12" },

    { "type": "image_picker", "id": "image_13", "label": "Image 13" },
    { "type": "text", "id": "title_13", "label": "Title 13", "default": "Our Concern_13" },
    { "type": "text", "id": "button_text_13", "label": "Button Text 13", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_13", "label": "Button Link 13" },

    { "type": "image_picker", "id": "image_14", "label": "Image 14" },
    { "type": "text", "id": "title_14", "label": "Title 14", "default": "Our Concern_14" },
    { "type": "text", "id": "button_text_14", "label": "Button Text 14", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_14", "label": "Button Link 14" },

    { "type": "image_picker", "id": "image_15", "label": "Image 15" },
    { "type": "text", "id": "title_15", "label": "Title 15", "default": "Our Concern_15" },
    { "type": "text", "id": "button_text_15", "label": "Button Text 15", "default": "Shop Now" },
    { "type": "url",  "id": "button_url_15", "label": "Button Link 15" }
  ],
  "presets": [{ "name": "3D Image Carousel", "category": "Image" }]
}
{% endschema %}

<div class="page-width">
  <div
    class="page-width section-{{ section.id }}-padding isolate{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %} page-width-3d"
    {% if settings.animations_reveal_on_scroll %} data-cascade {% endif %}
  >
    {% if section.settings.heading != blank %}
      <h2 class="home-title 3d-heading regular{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
        {% if settings.animations_reveal_on_scroll %} data-cascade style="--animation-order: 1;" {% endif %}
        id="home">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    <div class="carousel-container">
      <div class="gallery page-width section-{{ section.id }}-padding isolate{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
        {% if settings.animations_reveal_on_scroll %} data-cascade {% endif %}
      >
        <div class="gallery-container page-width section-{{ section.id }}-padding isolate{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
          {% if settings.animations_reveal_on_scroll %} data-cascade {% endif %}
        >
          {% for i in (1..10) %}
            {% assign img_id = 'image_' | append: i %}
            {% assign frame_index = i | minus: 1 | modulo: 6 | plus: 1 %}
            {% capture placeholder_name %}Frame-{{ frame_index }}{{ placeholder_ext }}{% endcapture %}

            {% if section.settings[img_id] != blank %}
              <img
                class="gallery-item gallery-item-{{ i }}"
                src="{{ section.settings[img_id] | image_url: width: 318, height: 318, crop: 'center' }}"
                width="318" height="318"
                data-index="{{ i }}"
                alt="category-image {{ i }}">
            {% else %}
              <img
                class="gallery-item gallery-item-{{ i }}"
                src="{{ placeholder_name | asset_url }}"
                width="318" height="318"
                data-index="{{ i }}"
                alt="placeholder category-image {{ i }}">
            {% endif %}
          {% endfor %}
        </div>
      </div>

      <div class="gallery-controls">
        <button class="gallery-controls-previous" aria-label="previous">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="23" viewBox="0 0 22 23" fill="none">
            <path d="M18.3332 11.5002H3.6665M3.6665 11.5002L9.1665 17.0002M3.6665 11.5002L9.1665 6.00024" stroke="#EBF7FF" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <button class="gallery-controls-next" aria-label="next">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="23" viewBox="0 0 22 23" fill="none">
            <path d="M3.66683 11.5002H18.3335M18.3335 11.5002L12.8335 17.0002M18.3335 11.5002L12.8335 6.00024" stroke="#EBF7FF" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="main_content">
      {% for i in (1..10) %}
        {% assign title_id = 'title_' | append: i %}
        {% assign button_text_id = 'button_text_' | append: i %}
        {% assign button_url_id = 'button_url_' | append: i %}
        {% assign btn_text = section.settings[button_text_id] | default: 'Shop Now' %}

        <div class="gallery-content gallery-content-{{ i }}" data-index="{{ i }}">
          <h3 class="home-title1 title-text regular">
            {{ section.settings[title_id] | default: 'Our Concern' }}
          </h3>

          {% if section.settings[button_url_id] != blank %}
            <a href="{{ section.settings[button_url_id] }}" class="button button--primary semibold">{{ btn_text }}</a>
          {% else %}
            <button type="button" class="button button--primary semibold" disabled>{{ btn_text }}</button>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</div>
